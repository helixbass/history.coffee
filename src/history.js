((function(){var a,b,c,d,e,f,g,h,i,j=Array.prototype.slice;i=function(b){return a.options([b])},e=$("html.ie6, html.ie7").length>0,d=$("html.ie6").length>0,f=function(a){var b;for(b in a)return!1;return!0},c=function(a){return a?JSON.parse(JSON.stringify(a)):{}},g=function(a,b){return b==null&&(b=1),a[a.length-b]},h=function(a){var b,c,d;b=a,d=[];for(;;){c=unescape(b);if(c===b)return b;d.push(b=c)}return d},jQuery.urlHelpers=b={getRootUrl:function(){return""+document.location.protocol+"//"+(document.location.hostname||document.location.host)+(document.location.port?":"+document.location.port:"")+"/"},getBaseHref:function(){return $("base").each(function(){return $(this).attr("href").replace(/[^\/]+$/,"").replace(/\/+$/,"").replace(/(.+)/,"$1/")}),""},getPageUrl:function(){var a;return((typeof History!="undefined"&&History!==null?(a=History.getState(false,false))!=null?a.url:void 0:void 0)||document.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:""+a+"/"})},getBasePageUrl:function(){return document.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"},getBaseUrl:function(){return b.getBaseHref()||b.getBasePageUrl()||b.getRootUrl()},getFullUrl:function(a,c){var d;return c==null&&(c=!0),d=a.substring(0,1),(/[a-z]+\:\/\//.test(a)?a:d==="/"?b.getRootUrl()+a.replace(/^\/+/,""):d==="#"?b.getPageUrl().replace(/.*/,"")+a:d==="?"?b.getPageUrl().replace(/[\?#].*/,"")+a:c?b.getBaseUrl()+a.replace(/^(\.\/)+/,""):b.getBasePageUrl()+a.replace(/^(\.\/)+/,"")).replace(/\#$/,"")},getShortUrl:function(a){var c;return c=((typeof History!="undefined"&&History!==null?History.emulated.pushState:void 0)?a.replace(b.getBaseUrl(),""):a).replace(b.getRootUrl(),"/"),(b.isTraditionalAnchor(c)?"./"+c:c).replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},isTraditionalAnchor:function(a){return!/[\/\?\.]/.test(a)}},jQuery.History=a={init:function(){return a.initCore(),typeof a.initHtml4=="function"?a.initHtml4():void 0},options:{hashChangeInterval:100,safariPollInterval:500,doubleCheckInterval:500,storeInterval:1e3,busyDelay:250,debug:!1,initialTitle:document.title},intervalList:[],clearAllIntervals:function(){var b,c,d,e;e=a.intervalList;for(c=0,d=e.length;c<d;c++)b=e[c],clearInterval(b);return!1},debug:function(){var b,c;c=arguments[0],b=2<=arguments.length?j.call(arguments,1):[];if(i("debug"))return a.log.apply(a,[c].concat(j.call(b)))},log:function(){var a,b,c,d,e,f,g,h,i;d=arguments[0],c=2<=arguments.length?j.call(arguments,1):[],(g=typeof console!=="undefined"&&console!==null?(h=console.debug)!=null?h.apply(console,[d,c]):void 0:void 0)!=null?g:typeof console!="undefined"&&console!==null&&(i=console.log)!=null&&i.apply(console,[d,c]),d="\n"+d+"\n";for(e=0,f=c.length;e<f;e++)b=c[e],d+=function(){try{return"\n"+JSON.stringify(b)+"\n"}catch(a){return!1}}();return(a=$(log)).length?a.val+=""+d+"\n-----\n":(typeof console!="undefined"&&console!==null?!console.log:!void 0)&&alert(d),!0},emulated:{pushState:!(history&&history.pushState&&history.replaceState&&!/\sMobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(navigator.userAgent||/AppleWebKit\/5([0-2]|3[0-2])/i.test(navigator.userAgent))),hashChange:!("onhashchange"in window||"onhashchange"in document)||e},enabled:!a.emulated.pushState,bugs:{setHash:a.enabled&&navigator.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(navigator.userAgent),safariPoll:a.bugs.setHash,ieDoubleCheck:e,hashEscape:d},store:{},idToState:{},stateToId:{},urlToId:{},storedStates:[],savedStates:[],normalizeStore:function(){var b,c,d;return(b=a.store).idToState||(b.idToState={}),(c=a.store).stateToId||(c.stateToId={}),(d=a.store).urlToId||(d.urlToId={})},initCore:function(){return!1},getState:function(a,b){a==null&&(a=!0),b==null&&(b=!0)},generateUniqueId:function(){var b;for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(a.idToState[b]==null&&a.store.idToState[b]==null)return b}return null},storeId:function(b,c,d){return a.stateToId[c]=b,a.idToState[b]=d,b},createId:function(b,c){return a.storeId(a.generateUniqueId(),b,c)},extractId:function(a){var b;return((b=/.*\&_suid=([0-9]+)$/.exec(a))!=null?b[1]:void 0)||!1},getStateById:function(b){if(!b)return;return b=String(b),a.idToState[b]||a.store.idToState[b]||void 0},createStateObject:function(b,c,d){return a.normalizeState({data:b,title:c,url:d})},getIdByUrl:function(b){return a.urlToId[b]||a.store.urlToId[b]||void 0},extractState:function(c,d){var e;return d==null&&(d=!1),(e=a.getStateById(a.extractId(c)))!=null?e:function(b){var e;return(e=a.getStateById(a.getIdByUrl(b)))!=null?e:d&&!a.isTraditionalAnchor(c)?a.createStateObject(null,null,b):null}(b.getFullUrl(c))},getStateString:function(a){return JSON.stringify({data:a.data,title:a.title,url:a.url})},getIdByState:function(b){return a.extractId(b.url)||function(c){var d,e;return(d=(e=a.stateToId[c])!=null?e:a.store.stateToId[c])!=null?d:a.createId(c,b)}(a.getStateString(b))},hasUrlDuplicate:function(b){var c;return((c=a.extractState(b.url))!=null?c.id:void 0)!==b.id},normalizeState:function(d){var e,g,i,j;d==null&&(d={});if(d.normalized!=null)return d;(j=d.data)==null&&(d.data={}),i={normalized:!0,title:d.title||"",url:b.getFullUrl(h(d.url||document.location.href)),data:c(d.data)},g=function(a){return a.replace(/\??\&_suid.*/,"")},e=function(a,b){return""+a+(/\?/.test(a)?"":"?")+"&_suid="+b},$.extend(i,{hash:a.getShortUrl(i.url),id:a.getIdByState(i),cleanUrl:g(i.url)}),i.url=i.cleanUrl;if(i.title||!f(i.data))i.hash=e(g(b.getShortUrl(i.url)),i.id);return i.hashedUrl=a.getFullUrl(i.hash),(a.emulated.pushState||a.bugs.safariPoll)&&a.hasUrlDuplicate(i)&&(i.url=i.hashedUrl),i},storeState:function(b){return a.urlToId[b.url]=b.id,a.storedStates.push(c(b)),b},getLastSavedState:function(){return g(a.savedStates)},getLastStoredState:function(){return g(a.storedStates)},isLastSavedState:function(b){return a.savedStates.length?b.id===a.getLastSavedState().id:!1},saveState:function(b){return a.isLastSavedState(b)?!1:(a.savedStates.push(c(b)),!0)},getStateByIndex:function(b){return b==null?g(a.savedStates):b<0?g(a.savedStates,-b):a.savedStates[b]},getHashByState:function(b){return a.normalizeState(b).hash},getStateId:function(b){return a.normalizeState(b).id}}})).call(this);